{% assign metrics = site.data.citations %}
{% assign author = site.author %}
<div class="citation-metrics">
  <h3>ðŸ“Š Citation Metrics 
    {% if author.googlescholar %}
      <a href="{{ author.googlescholar }}" target="_blank" title="View Google Scholar Profile">
        <i class="fas fa-external-link-alt" style="font-size: 0.8em;"></i>
      </a>
    {% endif %}
  </h3>
  {% if metrics and metrics.summary %}
    <ul>
      <li><strong>Total citations:</strong> 
        {% if author.googlescholar %}
          <a href="{{ author.googlescholar }}" target="_blank">{{ metrics.summary.total_citations | default: 'â€”' }}</a>
        {% else %}
          {{ metrics.summary.total_citations | default: 'â€”' }}
        {% endif %}
      </li>
      <li><strong>H-index:</strong> 
        {% if author.googlescholar %}
          <a href="{{ author.googlescholar }}" target="_blank">{{ metrics.summary.h_index | default: 'â€”' }}</a>
        {% else %}
          {{ metrics.summary.h_index | default: 'â€”' }}
        {% endif %}
      </li>
      <li><strong>i10-index:</strong> 
        {% if author.googlescholar %}
          <a href="{{ author.googlescholar }}" target="_blank">{{ metrics.summary.i10_index | default: 'â€”' }}</a>
        {% else %}
          {{ metrics.summary.i10_index | default: 'â€”' }}
        {% endif %}
      </li>
      <li><strong>Last updated:</strong> {{ metrics.fetched_at | default: 'â€”' }}</li>
    </ul>
    {% if author.googlescholar %}
      <p><a href="{{ author.googlescholar }}" target="_blank" class="btn btn--primary btn--small">
        <i class="fas fa-graduation-cap"></i> View Full Google Scholar Profile
      </a></p>
    {% endif %}
  {% else %}
    <p><em>Metrics will appear here when available.</em> 
      {% if author.googlescholar %}
        <a href="{{ author.googlescholar }}" target="_blank">View Google Scholar Profile</a>
      {% endif %}
    </p>
  {% endif %}
</div>
